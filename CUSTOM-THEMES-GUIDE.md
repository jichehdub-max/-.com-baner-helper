# Руководство по кастомным темам

## Возможности кастомных тем

### 1. Автоматический контрастный текст
Система автоматически определяет, какой цвет текста использовать (белый или чёрный) в зависимости от яркости фона:

- **Светлый фон** → Чёрный текст (#1a1a1a)
- **Тёмный фон** → Белый текст (#ffffff)

Это обеспечивает читаемость текста при любом цвете фона.

#### Как это работает:
```javascript
// Вычисляется яркость (luminance) цвета по формуле:
luminance = (0.299 * R + 0.587 * G + 0.114 * B) / 255

// Если luminance > 0.5 - фон светлый, используем тёмный текст
// Если luminance <= 0.5 - фон тёмный, используем светлый текст
```

### 2. Градиентный режим
Включите чекбокс "Градиентный режим" для создания анимированного градиента:

- Плавный переход между оттенками фона
- Анимация длится 10 секунд
- Бесконечный цикл
- Создаёт эффект "живого" фона

#### Что происходит:
- Создаётся градиент от основного цвета фона к более светлому оттенку
- Анимация переключается между двумя градиентами
- Используется CSS animation с keyframes

### 3. Настройка цветов

#### Основной цвет (Primary)
- Используется для акцентов
- Применяется к кнопкам, ссылкам, активным элементам
- Создаёт границы с прозрачностью

#### Вторичный цвет (Secondary)
- Дополняет основной цвет
- Используется в градиентах кнопок
- Применяется к второстепенным элементам

#### Цвет фона (Background)
- Основной цвет страницы
- Автоматически создаётся более светлый оттенок для карточек
- Определяет цвет текста (контрастный)

## Примеры использования

### Пример 1: Светлая тема
```
Название: Светлая тема
Основной цвет: #3b82f6 (синий)
Вторичный цвет: #8b5cf6 (фиолетовый)
Цвет фона: #f0f0f0 (светло-серый)
Градиент: ✓ Включён
```
**Результат:** Светлая тема с чёрным текстом и синими акцентами

### Пример 2: Тёмная тема с градиентом
```
Название: Ночной режим
Основной цвет: #10b981 (зелёный)
Вторичный цвет: #06b6d4 (циан)
Цвет фона: #0a0a0a (почти чёрный)
Градиент: ✓ Включён
```
**Результат:** Тёмная тема с белым текстом и анимированным градиентом

### Пример 3: Яркая тема
```
Название: Солнечная
Основной цвет: #f59e0b (оранжевый)
Вторичный цвет: #ef4444 (красный)
Цвет фона: #fef3c7 (светло-жёлтый)
Градиент: ✗ Выключен
```
**Результат:** Яркая светлая тема с чёрным текстом

## Технические детали

### CSS переменные, которые устанавливаются:
- `--itd-theme-primary` - основной цвет
- `--itd-theme-secondary` - вторичный цвет
- `--color-background` - цвет фона
- `--color-card` - цвет карточек (фон + 20% яркости)
- `--color-text` - цвет текста (автоматический)
- `--color-text-secondary` - вторичный текст (текст - 20% яркости)
- `--color-border` - цвет границ (primary с прозрачностью 0.3)

### Сохранение тем
Темы сохраняются в `chrome.storage.local` со следующей структурой:
```javascript
{
  name: "Название темы",
  primary: "#667eea",
  secondary: "#764ba2",
  bg: "#0a0e1a",
  gradient: true,
  created: "2026-02-09T..."
}
```

### Применение градиента
При включении градиента создаётся динамический `<style>` элемент с keyframes анимацией:
```css
@keyframes customGradient {
  0%, 100% {
    background: linear-gradient(135deg, #0a0e1a 0%, #1a1f2e 50%, #0a0e1a 100%);
  }
  50% {
    background: linear-gradient(135deg, #1a1f2e 0%, #0a0e1a 50%, #2a2f3e 100%);
  }
}
```

## Советы по созданию тем

1. **Контрастность**: Убедитесь, что основной цвет хорошо виден на выбранном фоне
2. **Гармония**: Выбирайте основной и вторичный цвета, которые хорошо сочетаются
3. **Градиент**: Используйте градиент для более динамичного вида
4. **Тестирование**: Примените тему перед сохранением, чтобы увидеть результат
5. **Яркость**: Для светлых тем выбирайте фон с яркостью > 50%, для тёмных < 50%
